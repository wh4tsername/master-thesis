\subsection{Логирование}

Есть два независимых способа логирования: логирование Roren графа оберток и логирование YT графа операций.

Класс TDumpYtGraphToDOTVisitor в коде демонстрирует реализацию паттерна visitor в контексте визуализации структуры данных графа операций TYtGraphV3 в формате DOT. Формат DOT как раз используется для визуализации графов.

Этот паттерн позволяет организовать обход графа таким образом, чтобы можно было применять специфические операции к каждому элементу графа без изменения их классов. Основной метод, который инициирует процесс визуализации. Он вызывает методы Prologue, Traverse, и Epilogue, которые собственно и управляют процессом генерации DOT-описания. Prologue и Epilogue служат для подготовки и завершения документа DOT, в то время как Traverse обеспечивает обход всех узлов графа.

В методе Traverse происходит обход узлов графа, где для каждой операции и связанной с ней таблицы вызываются специфичные методы OnOperation и OnTableInfo. Это демонстрирует гибкость паттерна в обработке различных типов узлов.

Методы OnOperation и OnTableInfo реализуют действия, которые нужно выполнить для каждого типа узлов в графе. OnOperation обрабатывает узлы, представляющие операции, генерируя строки для DOT файла, которые описывают эти операции и их связи. Аналогично OnTableInfo и OnTable обрабатывают узлы, представляющие таблицы, добавляя информацию о таблицах и их связях с операциями.

Visitor использует внешний объект Stream для формирования результатов своей работы и объект Graph, который содержит данные графа, над которым выполняется обработка. Это позволяет легко модифицировать логику визуализации или добавлять новые типы визуализаций, не изменяя основную структуру класса или классы данных.

Класс TPrinter предназначен для визуализации структуры графа TRorenGraph в формате DOT, который используется для описания направленных графов. Конструктор класса инициализирует экземпляр с ссылкой на граф, а метод DumpDOT генерирует строковое представление графа. В этом методе используются лямбда-функции для форматирования идентификаторов таблиц и вершин, а также для обработки путей и меток. В процессе генерации DOT-описания, метод перебирает все таблицы и вершины графа, выписывая связи между ними и формируя строку, которая затем выводится в выходной поток TStringOutput. Такой подход позволяет динамично строить визуальное представление структуры данных, что особенно полезно для анализа сложных зависимостей и иерархий внутри графа.
